<link rel="stylesheet" href="style.css">
<title>Good Monke Scripts</title>

<body>
    <div class="container">
        <h1 class="header">Needed Scripts</h1>
        <button class="install-button" onclick="fetchMediaTypes()">Install</button>
        <select id="mediaTypeSelector"></select>
        <p>go to Settings -> in "General", change config mode to Advanced -> scroll to "Downloads BETA" and change Download Mode to Browser API</p>
    </div>
    <script>
function fetchMediaTypes() {
    console.log('Fetching sites.json...');
    fetch('sites.json')
        .then(response => response.json())
        .then(data => {
            console.log('Sites data:', data);

            // Get all unique types (keys) from the JSON
            const mediaTypes = Object.keys(data);
            const mediaTypeSelector = document.getElementById('mediaTypeSelector');
            mediaTypeSelector.innerHTML = '';

            // Add an "All" option
            const allOption = document.createElement('option');
            allOption.value = 'all';
            allOption.textContent = 'All';
            mediaTypeSelector.appendChild(allOption);

            // Populate the dropdown with media types
            mediaTypes.forEach(type => {
                const option = document.createElement('option');
                option.value = type;
                option.textContent = type;
                mediaTypeSelector.appendChild(option);
            });

            mediaTypeSelector.addEventListener('change', () => {
                filterUrls(data, mediaTypeSelector.value);
            });

            // Default to 'All'
            filterUrls(data, 'all');
        })
        .catch(error => console.error('Error fetching sites.json:', error));
}

function filterUrls(data, selectedType) {
    if (selectedType === 'all') {
        // Collect URLs from all categories
        urls = Object.values(data).flat().filter(url => url.trim() !== '');
    } else {
        // Collect URLs from the selected category
        urls = data[selectedType] ? data[selectedType].filter(url => url.trim() !== '') : [];
    }
    console.log('Filtered URLs:', urls);
    currentIndex = 0;
    openNextTab();
}
    </script>
</body>
